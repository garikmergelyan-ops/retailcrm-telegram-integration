# üìù –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Webhook –≤ RetailCRM (—Ä–µ–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

## üéØ –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTP-–∑–∞–ø—Ä–æ—Å–∞ (–¥–µ—Ç–∞–ª—å–Ω–æ)

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã —É–∫–∞–∑–∞–ª–∏ URL –∏ –º–µ—Ç–æ–¥ POST, –≤—ã –≤–∏–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –æ–ø—Ü–∏–∏:

### 1. HTTP-headers (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)

**–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ JSON –¥–∞–Ω–Ω—ã—Ö –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫:**

1. –ù–∞–∂–º–∏—Ç–µ **"Add header"** (–∏–ª–∏ **"–î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫"**)
2. –í –ø–æ–ª–µ **"Header name"** (–∏–ª–∏ **"–ò–º—è –∑–∞–≥–æ–ª–æ–≤–∫–∞"**) –≤–≤–µ–¥–∏—Ç–µ:
   ```
   Content-Type
   ```
3. –í –ø–æ–ª–µ **"Header value"** (–∏–ª–∏ **"–ó–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞"**) –≤–≤–µ–¥–∏—Ç–µ:
   ```
   application/json
   ```
4. –ù–∞–∂–º–∏—Ç–µ **"Add"** –∏–ª–∏ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"** (–∏–ª–∏ –∫–Ω–æ–ø–∫—É —Å –ø–ª—é—Å–æ–º)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫:
```
Content-Type: application/json
```

### 2. Send parameters (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞)

–£ –≤–∞—Å –µ—Å—Ç—å 3 –æ–ø—Ü–∏–∏:

#### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 1: custom query body (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–í—ã–±–µ—Ä–∏—Ç–µ:** `custom query body` (–∏–ª–∏ **"–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞"**)

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –ï—Å–ª–∏ –µ—Å—Ç—å –ø–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ - –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º –∏–ª–∏ —É–∫–∞–∑–∞—Ç—å JSON-—à–∞–±–ª–æ–Ω
- RetailCRM –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

**–ü—Ä–∏–º–µ—Ä JSON-—à–∞–±–ª–æ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```json
{
  "order": {{order}},
  "event": "orderStatusChange"
}
```

**–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º** - RetailCRM –æ—Ç–ø—Ä–∞–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

#### ‚ö†Ô∏è –í–∞—Ä–∏–∞–Ω—Ç 2: in query body (urlencode)

**–í—ã–±–µ—Ä–∏—Ç–µ:** `in query body (urlencode)` (–∏–ª–∏ **"–≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ (urlencode)"**)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ï—Å–ª–∏ –≤–∞—à —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JSON
- –ï—Å–ª–∏ "custom query body" –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ `application/x-www-form-urlencoded`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í–∞—à —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ (JSON –∏ urlencode).

#### ‚ùå –í–∞—Ä–∏–∞–Ω—Ç 3: in query string

**–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –¥–ª—è webhooks - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É—Ç –≤ URL, –∞ –Ω–µ –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞.

## üìã –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–ø–æ—à–∞–≥–æ–≤–æ)

### –®–∞–≥ 1: –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- ‚úÖ **URL**: `https://your-app.onrender.com/webhook/retailcrm`
- ‚úÖ **–ú–µ—Ç–æ–¥**: `POST`

### –®–∞–≥ 2: HTTP-headers
- ‚úÖ –ù–∞–∂–º–∏—Ç–µ **"Add header"**
- ‚úÖ **Header name**: `Content-Type`
- ‚úÖ **Header value**: `application/json`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫

### –®–∞–≥ 3: Send parameters
- ‚úÖ –í—ã–±–µ—Ä–∏—Ç–µ **"custom query body"**
- ‚úÖ –û—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–µ –ø—É—Å—Ç—ã–º (–∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ JSON-—à–∞–±–ª–æ–Ω, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### –®–∞–≥ 4: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä
- ‚úÖ –ù–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"** –∏–ª–∏ **"–°–æ–∑–¥–∞—Ç—å"**

## üîç –ß—Ç–æ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ

RetailCRM –æ—Ç–ø—Ä–∞–≤–∏—Ç POST –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–∞—à URL —Å:
- **Headers:**
  ```
  Content-Type: application/json
  ```
- **Body (JSON):**
  ```json
  {
    "order": {
      "id": 12345,
      "number": "ORD-001",
      "status": "approved",
      "statusCode": "approved",
      // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–∫–∞–∑–∞
    },
    "event": "orderStatusChange"
  }
  ```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞:

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑** –≤ RetailCRM
2. **–ê–ø–ø—Ä—É–≤—å—Ç–µ –µ–≥–æ** (–∏–∑–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –Ω–∞ "approved")
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ Render.com:**
   - –ó–∞–π–¥–∏—Ç–µ –≤ Dashboard ‚Üí –í–∞—à —Å–µ—Ä–≤–∏—Å ‚Üí Logs
   - –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∑–∞–ø—Ä–æ—Å —Å –¥–∞–Ω–Ω—ã–º–∏ –∑–∞–∫–∞–∑–∞

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à –∫–æ–¥:**
   ```javascript
   // –í server.js —É–∂–µ –µ—Å—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–ª–∏):
   app.post('/webhook/retailcrm', (req, res) => {
       console.log('=== WEBHOOK RECEIVED ===');
       console.log('Headers:', req.headers);
       console.log('Body:', JSON.stringify(req.body, null, 2));
       // ...
   });
   ```

## ‚ö†Ô∏è –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Content-Type: application/json`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–ª–∏ `custom query body`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –≤–æ–∑–º–æ–∂–Ω–æ, –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –¥—Ä—É–≥–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ Render.com
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ endpoint `/webhook/retailcrm` - –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å 200 OK

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç, –Ω–æ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `server.js` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ `req.body`
3. –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥ –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

## üìù –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```
URL: https://retailcrm-telegram-integration.onrender.com/webhook/retailcrm
–ú–µ—Ç–æ–¥: POST

HTTP-headers:
  Content-Type: application/json

Send parameters:
  [x] custom query body
  (–ø–æ–ª–µ –ø—É—Å—Ç–æ–µ –∏–ª–∏ JSON-—à–∞–±–ª–æ–Ω)
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –Ω–∞ "approved" RetailCRM –æ—Ç–ø—Ä–∞–≤–∏—Ç POST –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä.

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –∑–∞–∫–∞–∑–µ!

